"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[932],{6781:(e,l,a)=>{a.r(l),a.d(l,{default:()=>k});a(1781),a(9939),a(6330),a(4580),a(4371),a(802),a(5440),a(2207),a(4962),a(9029),a(7425),a(8704),a(8623),a(3499),a(8461),a(3068),a(9937),a(3362);var n=a(4401),t=a(8849),u=(a(3711),a(1066)),i=a(6141),o=a(7549),r=(a(422),a(2097),a(8865),a(9961),{class:"formModel_btn_box"});const d={__name:"formModel",emits:["formModelChange"],setup:function(e,l){var a,t=l.expose,i=l.emit,o=null===(a=(0,n.FN)())||void 0===a?void 0:a.appContext.config.globalProperties,d="address",s="地址",v=(0,u.iH)({}),f=(0,u.iH)({address:!1,name:!1,phone:!1,isdefault:!1,userid:!1}),c=(0,u.iH)(!1),p=(0,u.iH)(!1),m=(0,u.iH)(""),g=(0,u.iH)({address:[{required:!0,message:"请输入",trigger:"blur"}],name:[],phone:[],isdefault:[],userid:[{required:!0,message:"请输入",trigger:"blur"}]}),h=(0,u.iH)(null),w=(0,u.iH)(0),b=(0,u.iH)(""),_=(0,u.iH)([]),k=function(){v.value={address:"",name:"",phone:"",isdefault:"否",userid:""}},y=function(){null===o||void 0===o||o.$http({url:"".concat(d,"/info/").concat(w.value),method:"get"}).then((function(e){new RegExp("../../../file","g");v.value=e.data.data,c.value=!0}))},W=(0,u.iH)(""),H=(0,u.iH)(""),C=(0,u.iH)(""),U=(0,u.iH)(""),x=(0,u.iH)(""),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(k(),e&&(w.value=e,b.value=l),"add"==l)p.value=!0,m.value="新增"+s,c.value=!0;else if("info"==l)p.value=!1,m.value="查看"+s,y();else if("edit"==l)p.value=!0,m.value="修改"+s,y();else if("logistics"==l)p.value=!1,m.value="修改物流信息",y();else if("reply"==l)b.value=l,p.value=!0,f.value.cpicture=!0,f.value.content=!0,m.value="回复",y();else if("cross"==l){for(var r in p.value=!0,m.value=a,n)"address"!=r?"name"!=r?"phone"!=r?"isdefault"!=r?"userid"!=r||(v.value.userid=n[r],f.value.userid=!0):(v.value.isdefault=n[r],f.value.isdefault=!0):(v.value.phone=n[r],f.value.phone=!0):(v.value.name=n[r],f.value.name=!0):(v.value.address=n[r],f.value.address=!0);n&&(W.value=n),t&&(H.value=t),i&&(C.value=i),u&&(U.value=u),o&&(x.value=o),v.value.isdefault="否",c.value=!0}};t({init:$});var z=function(){c.value=!1},V=function(){v.value.userid=null===o||void 0===o?void 0:o.$toolUtil.storageGet("userid");H.value;var e=JSON.parse(JSON.stringify(W.value)),l="",a="",n="";if("cross"==b.value&&""!=U.value)if(U.value.startsWith("["))l=null===o||void 0===o?void 0:o.$toolUtil.storageGet("userid"),a=e["id"],n=U.value.replace(/\[/,"").replace(/\]/,"");else{for(var t in e)t==U.value&&(e[t]=x.value);j(e)}h.value.validate((function(e){if(e)if(l&&a){v.value.crossuserid=l,v.value.crossrefid=a;var t={page:1,limit:1e3,crossuserid:v.value.crossuserid,crossrefid:v.value.crossrefid};null===o||void 0===o||o.$http({url:"".concat(d,"/page"),method:"get",params:t}).then((function(e){if(e.data.data.total>=n)return null===o||void 0===o||o.$toolUtil.message("".concat(C.value),"error"),!1;null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(v.value.id?"update":"save"),method:"post",data:v.value}).then((function(e){null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){c.value=!1,i("formModelChange")}))}))}))}else null===o||void 0===o||o.$http({url:"".concat(d,"/").concat(v.value.id?"update":"save"),method:"post",data:v.value}).then((function(e){null===o||void 0===o||o.$toolUtil.message("操作成功","success",(function(){c.value=!1,i("formModelChange")}))}))}))},j=function(e){null===o||void 0===o||o.$http({url:"".concat(H.value,"/update"),method:"post",data:e}).then((function(e){}))};return function(e,l){var a=(0,n.up)("el-input"),t=(0,n.up)("el-form-item"),u=(0,n.up)("el-col"),i=(0,n.up)("el-option"),o=(0,n.up)("el-select"),d=(0,n.up)("el-row"),s=(0,n.up)("el-form"),w=(0,n.up)("el-button"),k=(0,n.up)("el-dialog");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(k,{modelValue:c.value,"onUpdate:modelValue":l[4]||(l[4]=function(e){return c.value=e}),title:m.value,width:"50%","destroy-on-close":"",fullscreen:!1},(0,n.Nv)({default:(0,n.w5)((function(){return[(0,n.Wm)(s,{class:"formModel_form",ref_key:"formRef",ref:h,model:v.value,"label-width":"$template2.back.add.form.base.labelWidth",rules:g.value},{default:(0,n.w5)((function(){return[(0,n.Wm)(d,null,{default:(0,n.w5)((function(){return[(0,n.Wm)(u,{span:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"地址",prop:"address"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:v.value.address,"onUpdate:modelValue":l[0]||(l[0]=function(e){return v.value.address=e}),placeholder:"地址",type:"text",readonly:!(p.value&&!f.value.address)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"收货人",prop:"name"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:v.value.name,"onUpdate:modelValue":l[1]||(l[1]=function(e){return v.value.name=e}),placeholder:"收货人",type:"text",readonly:!(p.value&&!f.value.name)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"电话",prop:"phone"},{default:(0,n.w5)((function(){return[(0,n.Wm)(a,{class:"list_inp",modelValue:v.value.phone,"onUpdate:modelValue":l[2]||(l[2]=function(e){return v.value.phone=e}),placeholder:"电话",type:"text",readonly:!(p.value&&!f.value.phone)},null,8,["modelValue","readonly"])]})),_:1})]})),_:1}),(0,n.Wm)(u,{span:24},{default:(0,n.w5)((function(){return[(0,n.Wm)(t,{label:"是否默认地址",prop:"isdefault"},{default:(0,n.w5)((function(){return[(0,n.Wm)(o,{class:"list_sel",disabled:!(p.value&&!f.value.isdefault),modelValue:v.value.isdefault,"onUpdate:modelValue":l[3]||(l[3]=function(e){return v.value.isdefault=e}),placeholder:"请选择是否默认地址"},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(_.value,(function(e,l){return(0,n.wg)(),(0,n.j4)(i,{label:e,value:e},null,8,["label","value"])})),256))]})),_:1},8,["disabled","modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])]})),_:2},[p.value||"logistics"==b.value||"reply"==b.value?{name:"footer",fn:(0,n.w5)((function(){return[(0,n._)("span",r,[(0,n.Wm)(w,{class:"formModel_cancel",onClick:z},{default:(0,n.w5)((function(){return[(0,n.Uk)("取消")]})),_:1}),(0,n.Wm)(w,{class:"formModel_confirm",type:"primary",onClick:V},{default:(0,n.w5)((function(){return[(0,n.Uk)(" 提交 ")]})),_:1})])]})),key:"0"}:void 0]),1032,["modelValue","title"])])}}};var s=a(1059);const v=(0,s.Z)(d,[["__scopeId","data-v-cf8c3aac"]]),f=v;var c=function(e){return(0,n.dD)("data-v-66254098"),e=e(),(0,n.Cn)(),e},p={class:"app-contain"},m={class:"list_search_view"},g=c((function(){return(0,n._)("br",null,null,-1)})),h={class:"btn_view"},w=c((function(){return(0,n._)("br",null,null,-1)}));const b={__name:"list",setup:function(e){var l,a=null===(l=(0,n.FN)())||void 0===l?void 0:l.appContext.config.globalProperties,r="address",d="地址";(0,i.yj)();(0,n.bv)((function(){}));var s=(0,u.iH)(null),v=(0,u.iH)(null),c=(0,u.iH)({page:1,limit:20,sort:"id",order:"desc"}),b=(0,u.iH)({}),_=(0,u.iH)([]),k=(0,u.iH)(!1),y=function(e){(0,n.Y3)((function(){v.value.clearSelection(),v.value.toggleRowSelection(e)}))},W=function(){k.value=!0;var e=JSON.parse(JSON.stringify(c.value));e["sort"]="id",e["order"]="desc",null===a||void 0===a||a.$http({url:"".concat(r,"/page"),method:"get",params:e}).then((function(e){k.value=!1,s.value=e.data.data.list,U.value=Number(e.data.data.total)}))},H=function(e){var l=(0,u.iH)([]);if(e)l.value=[e];else{if(!_.value.length)return!1;for(var n in _.value)l.value.push(_.value[n].id)}o.T.confirm("是否删除选中".concat(d),"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){null===a||void 0===a||a.$http({url:"".concat(r,"/delete"),method:"post",data:l.value}).then((function(e){null===a||void 0===a||a.$toolUtil.message("删除成功","success",(function(){W()}))}))}))},C=function(e){_.value=e},U=(0,u.iH)(0),x=(0,u.iH)(["prev","pager","next"]),$=function(e){c.value.limit=e,W()},z=function(e){c.value.page=e,W()},V=function(){c.value.page=c.value.page-1,W()},j=function(){c.value.page=c.value.page+1,W()},M=function(e,l){return null===a||void 0===a?void 0:a.$toolUtil.isAuth(e,l)},N=function(){c.value.page=1,W()},S=(0,u.iH)(null),q=function(){N()},R=function(){S.value.init()},D=function(){_.value.length&&S.value.init(_.value[0].id,"edit")},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?S.value.init(e,"info"):_.value.length&&S.value.init(_.value[0].id,"info")},O=function(){W()};return O(),function(e,l){var a=(0,n.up)("el-form"),u=(0,n.up)("el-button"),i=(0,n.up)("el-table-column"),o=(0,n.up)("el-table"),r=(0,n.up)("el-pagination"),d=(0,n.Q2)("loading");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",p,[(0,n._)("div",m,[(0,n.Wm)(a,{model:b.value,class:"search_form"},null,8,["model"]),g,(0,n._)("div",h,[M("address","新增")?((0,n.wg)(),(0,n.j4)(u,{key:0,type:"success",onClick:R},{default:(0,n.w5)((function(){return[(0,n.Uk)("新增")]})),_:1})):(0,n.kq)("",!0),M("address","查看")?((0,n.wg)(),(0,n.j4)(u,{key:1,type:"info",disabled:1!=_.value.length,onClick:l[0]||(l[0]=function(e){return J(null)})},{default:(0,n.w5)((function(){return[(0,n.Uk)("详情")]})),_:1},8,["disabled"])):(0,n.kq)("",!0),M("address","修改")?((0,n.wg)(),(0,n.j4)(u,{key:2,type:"primary",disabled:1!=_.value.length,onClick:D},{default:(0,n.w5)((function(){return[(0,n.Uk)("修改")]})),_:1},8,["disabled"])):(0,n.kq)("",!0),M("address","删除")?((0,n.wg)(),(0,n.j4)(u,{key:3,type:"danger",disabled:!_.value.length,onClick:l[1]||(l[1]=function(e){return H(null)})},{default:(0,n.w5)((function(){return[(0,n.Uk)("删除")]})),_:1},8,["disabled"])):(0,n.kq)("",!0)])]),w,M("address","查看")?(0,n.wy)(((0,n.wg)(),(0,n.j4)(o,{key:0,border:"",stripe:!1,onSelectionChange:C,ref_key:"table",ref:v,data:s.value,onRowClick:y},{default:(0,n.w5)((function(){return[(0,n.Wm)(i,{resizable:!0,align:"left","header-align":"left",type:"selection",width:"55"}),(0,n.Wm)(i,{label:"序号",width:"70",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.$index+1),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"地址"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.address),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"收货人"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.name),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"电话"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.phone),1)]})),_:1}),(0,n.Wm)(i,{resizable:!0,sortable:!0,align:"left","header-align":"left",label:"是否默认地址"},{default:(0,n.w5)((function(e){return[(0,n.Uk)((0,t.zw)(e.row.isdefault),1)]})),_:1}),(0,n.Wm)(i,{label:"操作",width:"300",resizable:!0,sortable:!0,align:"left","header-align":"left"},{default:(0,n.w5)((function(e){return[M("address","查看")?((0,n.wg)(),(0,n.j4)(u,{key:0,type:"info",onClick:function(l){return J(e.row.id)}},{default:(0,n.w5)((function(){return[(0,n.Uk)("详情")]})),_:2},1032,["onClick"])):(0,n.kq)("",!0)]})),_:1})]})),_:1},8,["data"])),[[d,k.value]]):(0,n.kq)("",!0),(0,n.Wm)(r,{background:"",layout:x.value.join(","),total:U.value,"page-size":c.value.limit,"prev-text":"上一页","next-text":"下一页","hide-on-single-page":!1,style:{padding:"0",margin:"20px 0 0",whiteSpace:"nowrap",color:"#333",textAlign:"center",width:"100%",fontWeight:"500"},onSizeChange:$,onCurrentChange:z,onPrevClick:V,onNextClick:j},null,8,["layout","total","page-size"])]),(0,n.Wm)(f,{ref_key:"formRef",ref:S,onFormModelChange:q},null,512)])}}},_=(0,s.Z)(b,[["__scopeId","data-v-66254098"]]),k=_}}]);
//# sourceMappingURL=932.c4f7e1a9.js.map